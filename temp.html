<!doctype html> 

<!-- Julia Jansen -->
<!-- Data Processing, week 1 -->

<html>

<textarea id="rawdata">
1992/01/01,   60
1992/01/02,   70
1992/01/03,   51
1992/01/04,   66
1992/01/05,   81
1992/01/06,   87
1992/01/07,   36
1992/01/08,   75
1992/01/09,   64
1992/01/10,   24
1992/01/11,  -26
1992/01/12,    7
1992/01/13,   45
1992/01/14,   63
1992/01/15,   66
1992/01/16,   54
1992/01/17,   59
1992/01/18,   57
1992/01/19,   61
1992/01/20,    3
1992/01/21,  -33
1992/01/22,  -47
1992/01/23,  -50
1992/01/24,  -54
1992/01/25,  -36
1992/01/26,   22
1992/01/27,   23
1992/01/28,   -7
1992/01/29,   16
1992/01/30,    9
1992/01/31,   -4
1992/02/01,  -18
1992/02/02,   -6
1992/02/03,   53
1992/02/04,   33
1992/02/05,   69
1992/02/06,   78
1992/02/07,   49
1992/02/08,   34
1992/02/09,   46
1992/02/10,   63
1992/02/11,   71
1992/02/12,  103
1992/02/13,   74
1992/02/14,   64
1992/02/15,   80
1992/02/16,   32
1992/02/17,    3
1992/02/18,   -9
1992/02/19,   11
1992/02/20,   24
1992/02/21,   43
1992/02/22,   38
1992/02/23,   63
1992/02/24,   64
1992/02/25,   60
1992/02/26,   69
1992/02/27,   85
1992/02/28,   68
1992/02/29,   88
1992/03/01,   97
1992/03/02,   67
1992/03/03,   72
1992/03/04,   88
1992/03/05,   99
1992/03/06,   80
1992/03/07,   76
1992/03/08,   80
1992/03/09,   70
1992/03/10,   74
1992/03/11,   59
1992/03/12,   85
1992/03/13,   62
1992/03/14,   34
1992/03/15,   44
1992/03/16,   58
1992/03/17,   89
1992/03/18,   87
1992/03/19,   86
1992/03/20,   92
1992/03/21,   86
1992/03/22,   58
1992/03/23,   50
1992/03/24,   49
1992/03/25,   51
1992/03/26,   44
1992/03/27,   49
1992/03/28,   34
1992/03/29,   40
1992/03/30,   83
1992/03/31,   84
1992/04/01,   63
1992/04/02,   58
1992/04/03,   62
1992/04/04,   51
1992/04/05,   52
1992/04/06,   73
1992/04/07,   99
1992/04/08,  106
1992/04/09,   99
1992/04/10,  103
1992/04/11,  100
1992/04/12,   90
1992/04/13,   72
1992/04/14,   98
1992/04/15,   60
1992/04/16,   46
1992/04/17,   58
1992/04/18,  117
1992/04/19,   85
1992/04/20,   68
1992/04/21,   97
1992/04/22,  105
1992/04/23,   95
1992/04/24,  122
1992/04/25,  126
1992/04/26,  122
1992/04/27,  111
1992/04/28,   90
1992/04/29,   88
1992/04/30,   97
1992/05/01,   95
1992/05/02,   86
1992/05/03,   86
1992/05/04,   91
1992/05/05,  110
1992/05/06,  125
1992/05/07,  142
1992/05/08,  111
1992/05/09,   86
1992/05/10,   97
1992/05/11,  106
1992/05/12,  116
1992/05/13,  158
1992/05/14,  219
1992/05/15,  195
1992/05/16,  139
1992/05/17,  123
1992/05/18,  164
1992/05/19,  184
1992/05/20,  191
1992/05/21,  188
1992/05/22,  202
1992/05/23,  216
1992/05/24,  215
1992/05/25,  218
1992/05/26,  194
1992/05/27,  193
1992/05/28,  213
1992/05/29,  193
1992/05/30,  184
1992/05/31,  198
1992/06/01,  192
1992/06/02,  179
1992/06/03,  166
1992/06/04,  137
1992/06/05,  156
1992/06/06,  174
1992/06/07,  153
1992/06/08,  166
1992/06/09,  161
1992/06/10,  181
1992/06/11,  158
1992/06/12,  170
1992/06/13,  182
1992/06/14,  185
1992/06/15,  207
1992/06/16,  168
1992/06/17,  150
1992/06/18,  127
1992/06/19,  135
1992/06/20,  186
1992/06/21,  168
1992/06/22,  153
1992/06/23,  156
1992/06/24,  154
1992/06/25,  168
1992/06/26,  174
1992/06/27,  203
1992/06/28,  217
1992/06/29,  224
1992/06/30,  218
1992/07/01,  200
1992/07/02,  169
1992/07/03,  183
1992/07/04,  171
1992/07/05,  179
1992/07/06,  181
1992/07/07,  168
1992/07/08,  173
1992/07/09,  201
1992/07/10,  163
1992/07/11,  170
1992/07/12,  168
1992/07/13,  161
1992/07/14,  161
1992/07/15,  165
1992/07/16,  206
1992/07/17,  176
1992/07/18,  178
1992/07/19,  213
1992/07/20,  233
1992/07/21,  205
1992/07/22,  170
1992/07/23,  185
1992/07/24,  203
1992/07/25,  189
1992/07/26,  184
1992/07/27,  168
1992/07/28,  163
1992/07/29,  184
1992/07/30,  193
1992/07/31,  197
1992/08/01,  211
1992/08/02,  190
1992/08/03,  190
1992/08/04,  171
1992/08/05,  194
1992/08/06,  181
1992/08/07,  195
1992/08/08,  239
1992/08/09,  250
1992/08/10,  173
1992/08/11,  173
1992/08/12,  165
1992/08/13,  154
1992/08/14,  153
1992/08/15,  158
1992/08/16,  166
1992/08/17,  167
1992/08/18,  158
1992/08/19,  187
1992/08/20,  182
1992/08/21,  181
1992/08/22,  187
1992/08/23,  157
1992/08/24,  166
1992/08/25,  195
1992/08/26,  183
1992/08/27,  200
1992/08/28,  177
1992/08/29,  150
1992/08/30,  137
1992/08/31,  135
1992/09/01,  121
1992/09/02,  140
1992/09/03,  140
1992/09/04,  114
1992/09/05,  113
1992/09/06,  128
1992/09/07,  135
1992/09/08,  125
1992/09/09,  139
1992/09/10,  157
1992/09/11,  156
1992/09/12,  126
1992/09/13,  137
1992/09/14,  141
1992/09/15,  161
1992/09/16,  144
1992/09/17,  132
1992/09/18,  144
1992/09/19,  148
1992/09/20,  158
1992/09/21,  171
1992/09/22,  177
1992/09/23,  139
1992/09/24,  140
1992/09/25,  166
1992/09/26,  172
1992/09/27,  188
1992/09/28,  175
1992/09/29,  152
1992/09/30,  153
1992/10/01,  131
1992/10/02,  118
1992/10/03,  121
1992/10/04,  118
1992/10/05,   88
1992/10/06,  107
1992/10/07,  112
1992/10/08,  115
1992/10/09,  102
1992/10/10,   88
1992/10/11,   91
1992/10/12,   79
1992/10/13,   42
1992/10/14,   63
1992/10/15,   65
1992/10/16,   60
1992/10/17,   55
1992/10/18,   69
1992/10/19,   90
1992/10/20,   68
1992/10/21,   59
1992/10/22,   76
1992/10/23,   73
1992/10/24,   62
1992/10/25,   65
1992/10/26,   66
1992/10/27,   71
1992/10/28,   63
1992/10/29,   64
1992/10/30,   54
1992/10/31,   44
1992/11/01,   61
1992/11/02,   83
1992/11/03,   88
1992/11/04,   85
1992/11/05,  116
1992/11/06,  112
1992/11/07,  104
1992/11/08,   64
1992/11/09,   68
1992/11/10,   89
1992/11/11,   81
1992/11/12,   66
1992/11/13,   50
1992/11/14,   45
1992/11/15,   54
1992/11/16,   71
1992/11/17,   65
1992/11/18,   64
1992/11/19,   73
1992/11/20,   57
1992/11/21,   64
1992/11/22,  120
1992/11/23,  107
1992/11/24,  107
1992/11/25,  106
1992/11/26,   89
1992/11/27,   67
1992/11/28,   64
1992/11/29,   62
1992/11/30,  118
1992/12/01,   81
1992/12/02,   91
1992/12/03,   71
1992/12/04,   47
1992/12/05,   39
1992/12/06,   35
1992/12/07,   56
1992/12/08,   44
1992/12/09,   25
1992/12/10,   35
1992/12/11,   49
1992/12/12,   67
1992/12/13,   66
1992/12/14,   92
1992/12/15,   61
1992/12/16,   62
1992/12/17,   59
1992/12/18,   71
1992/12/19,   69
1992/12/20,   30
1992/12/21,   28
1992/12/22,   31
1992/12/23,   29
1992/12/24,   42
1992/12/25,   12
1992/12/26,   -6
1992/12/27,    4
1992/12/28,  -18
1992/12/29,  -32
1992/12/30,  -40
1992/12/31,  -56
</textarea> 
    
    <head> 
        <!-- app's own CSS -->
        <!--<link href="/css/styles.css" rel="stylesheet"/>-->
        
        <!-- app's own JavaScript -->
        <!--<script src="/js/scripts.js"></script>-->
        
        <meta charset="utf-8">
        
        <title>
            Assignment 1 - Javascript
        </title>
        
        <style type="text/css">
            canvas { border: 1px solid black; }
        </style>
    </head>
    
    <body onload="draw();">
        <canvas id="graph" width="800" height="500" style="position: absolute"></canvas>
        <canvas id="top" width="800" height="500" style="position: absolute"></canvas>
    </body>
</html>

<script>
    // get plaintext of element
    var get_data = document.getElementById("rawdata").textContent;
    
    // split text into seperate lines
    var data = get_data.split("\n");
    var dates = [];
    var temps = [];
    
    // loop over data array
    for (var i=0;i<data.length;i++) {
        var datapoint = data[i].split(",");
        var parts = datapoint[0].split('/');
        
        // save dates in one array and temps in another
        dates[i] = new Date(parts[0], parts[1], parts[2]);
        temps[i] = Number(datapoint[1]); 
    }
    
    // calculate days since 1992, Jan, 01
    var oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds
    var firstDate = new Date(1992,01,01);
    
    // save values for days in array
    var days = [];
    for (i=0;i<data.length - 1;i++) {
        days[i] = Math.round(Math.abs((dates[i].getTime() - 
        firstDate.getTime())/oneDay));
    }
    

    // create function to transform data into x or y values
    function createTransform(range, domain) {
        var alpha;
        var beta;
	    // range[0] = alpha * domain[0] + beta;
	    // range[1] = alpha * domain[1] + beta;

 		// Implement your solution here:
 		alpha = (range[1] - range[0]) / (domain[1] - domain[0]);
	    beta = range[0] - domain[0]*alpha;
	
	    return function(x){
		    return alpha * x + beta;
	    };
    }

    // transform temp 
    var transform_y = createTransform([50, 450], [300, -200]);
    var transform_x = createTransform([100, 650], [0, 366]);

	// draw the graph on the canvas
    function draw() {
        var canvas = document.getElementById('graph');
        
        // months for pretty printing
        var months = [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December",
        ];
    
        if (canvas.getContext) {
            var ctx = canvas.getContext('2d');
        
            ctx.beginPath();
            
            // draw y-ax
            ctx.moveTo(50, 50);
            ctx.lineTo(50, 450);
            for (var i=0;i<21;i++) {
                ctx.moveTo(50, 50 + i*20);
                ctx.lineTo(45, 50 + i*20);
            }
            
            // draw x-ax
            ctx.moveTo(50, 450);
            ctx.lineTo(750, 450);
            for (i=0;i<14;i++) {
                var x = 50 + i*50;
                ctx.moveTo(x, 450);
                ctx.lineTo(x, 455);
            }
            
            ctx.stroke();
            
            // draw numbers y-ax
            ctx.font = "11px";
            for (i=0;i<11;i++){
                var tp = 30 - i*5;
                var temp = tp.toString();
                ctx.fillText(temp, 29, 52 + i*40);
            }
            
            // draw months x-ax
            ctx.font = "11px";
            for (i=0;i<12;i++) {
                var month = months[i];
                x = 80 + i*50;
                
                ctx.save();
                ctx.translate(x, 490);
                ctx.rotate((Math.PI/180) * -45);
                ctx.translate(-x, -490);
                ctx.fillText(month, x, 490);
                ctx.restore();
            }
            
            // draw title
            ctx.fillText("Temperature in degrees Celsius in de Bilt (NL, 1992)", 400, 40);

            // draw reading lines
            ctx.beginPath();
            for (i=0;i<10;i++){
                ctx.lineWidth = 0.2;
                ctx.moveTo(50, 50 +i*40);
                ctx.lineTo(750, 50 +i*40);
            }
            ctx.stroke();
            
            // draw line between data points
            ctx.beginPath();
            ctx.lineWidth = 1;
            for (i=0;i<data.length - 1;i++) {
                var y = transform_y(temps[i]);
                x = transform_x(days[i]);
                ctx.lineTo(x, y);
            }
            ctx.stroke();
        
            var second_canvas = document.getElementById('top');
            var top = second_canvas.getContext('2d');
            
            var coordinates = top.getBoundingClientRect();
            console.log(coordinates);
            
            
            $("#btn_1").click(function() {
                alert("Btn 1 Clicked");
            });
            
        // non canvas supported message    
        } else {
            alert("Nothing for you here.");
        }
    }
</script>


